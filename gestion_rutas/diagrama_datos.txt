
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      ESTRUCTURA DE BASE DE DATOS                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ALMACENAMIENTO EN DISCO                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  c:\Users\hanss\Desktop\LAR\                                            â”‚
â”‚  â””â”€â”€ gestion_rutas\                                                        â”‚
â”‚      â”œâ”€â”€ gestion_rutas.db  â­ â† AQUÃ ESTÃN LOS 503 REGISTROS              â”‚
â”‚      â”‚   â”‚                                                                  â”‚
â”‚      â”‚   â”œâ”€â”€ Tabla: zona (1 registro)                                      â”‚
â”‚      â”‚   â”‚   â”œâ”€â”€ id_zona: 1                                                â”‚
â”‚      â”‚   â”‚   â”œâ”€â”€ nombre: "Zona Prueba LSTM"                                â”‚
â”‚      â”‚   â”‚   â””â”€â”€ ...                                                       â”‚
â”‚      â”‚   â”‚                                                                  â”‚
â”‚      â”‚   â””â”€â”€ Tabla: prediccion_demanda (503 registros) â­                  â”‚
â”‚      â”‚       â”œâ”€â”€ id_prediccion: 1-503                                      â”‚
â”‚      â”‚       â”œâ”€â”€ valor_real_kg: [0-1000]                                   â”‚
â”‚      â”‚       â”œâ”€â”€ valor_predicho_kg: [290-663]                              â”‚
â”‚      â”‚       â”œâ”€â”€ error_mape: [0%-7103%]                                    â”‚
â”‚      â”‚       â””â”€â”€ ...                                                       â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â”œâ”€â”€ lstm\                                                            â”‚
â”‚      â”‚   â”œâ”€â”€ predicciones_lstm.csv (archivo original)                      â”‚
â”‚      â”‚   â”œâ”€â”€ analisis_predicciones_bd.csv (exportaciÃ³n)                    â”‚
â”‚      â”‚   â”œâ”€â”€ test_insert_predictions_db.py (script inserciÃ³n)              â”‚
â”‚      â”‚   â””â”€â”€ query_predictions_db.py (script consulta)                     â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â”œâ”€â”€ database\                                                        â”‚
â”‚      â”‚   â””â”€â”€ db.py (configuraciÃ³n SQLite/PostgreSQL)                       â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â””â”€â”€ models\                                                          â”‚
â”‚          â””â”€â”€ models.py (definiciÃ³n ORM)                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VISTA ACTUAL (DESARROLLO - SQLite)                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   AplicaciÃ³n FastAPI                                                        â”‚
â”‚   â†“                                                                         â”‚
â”‚   database/db.py â†’ create_engine("sqlite:///./gestion_rutas.db")           â”‚
â”‚   â†“                                                                         â”‚
â”‚   models/models.py â†’ Define ORM (Zona, PrediccionDemanda)                 â”‚
â”‚   â†“                                                                         â”‚
â”‚   â­ gestion_rutas.db â­ (Archivo SQLite local - 53 KB)                   â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€ Tabla: zona (1 fila)                                                 â”‚
â”‚   â””â”€â”€ Tabla: prediccion_demanda (503 filas)                                â”‚
â”‚                                                                              â”‚
â”‚   ACCESO A DATOS:                                                          â”‚
â”‚   â€¢ Python + SQLAlchemy ORM                                              â”‚
â”‚   â€¢ FastAPI endpoints                                                    â”‚
â”‚   â€¢ SQLite3 directo                                                      â”‚
â”‚   â€¢ PostgreSQL â†’ â³ (Pendiente)                                            â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VISTA FUTURA (PRODUCCIÃ“N - PostgreSQL)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   AplicaciÃ³n FastAPI                                                        â”‚
â”‚   â†“                                                                         â”‚
â”‚   database/db.py â†’ create_engine("postgresql://user:pass@host:5432/...")  â”‚
â”‚   â†“                                                                         â”‚
â”‚   models/models.py â†’ Define ORM (igual)                                   â”‚
â”‚   â†“                                                                         â”‚
â”‚   â­ PostgreSQL Server â­                                                   â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€ Base de datos: gestion_rutas                                         â”‚
â”‚   â”‚   â”œâ”€â”€ Tabla: zona (1 fila)                                             â”‚
â”‚   â”‚   â””â”€â”€ Tabla: prediccion_demanda (503 filas)                            â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â””â”€â”€ (Base de datos compartida, escalable, con respaldo)                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         DATOS POR TABLA                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TABLA: zona
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id_zona â”‚ nombre           â”‚ tipo    â”‚ area_km2 â”‚ poblacionâ”‚ prioridadâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    1    â”‚ Zona Prueba LSTM â”‚  test   â”‚  50.0   â”‚  5000   â”‚    1    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TABLA: prediccion_demanda (Primeros 3 de 503 registros)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id_prediccionâ”‚ id_zona â”‚ horizonte â”‚ fecha_prediccionâ”‚ real_kg â”‚ pred_kg  â”‚ modelo â”‚ rmse   â”‚ mape % â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      1       â”‚    1    â”‚    24     â”‚ 2024-06-04...  â”‚ 260.50  â”‚ 535.06   â”‚  1.0   â”‚ 0.2746 â”‚ 105.40 â”‚
â”‚      2       â”‚    1    â”‚    24     â”‚ 2024-06-05...  â”‚ 865.55  â”‚ 501.88   â”‚  1.0   â”‚ 0.3637 â”‚ 42.02  â”‚
â”‚      3       â”‚    1    â”‚    24     â”‚ 2024-06-06...  â”‚ 117.65  â”‚ 578.47   â”‚  1.0   â”‚ 0.4608 â”‚ 391.70 â”‚
â”‚     ...      â”‚   ...   â”‚   ...     â”‚      ...        â”‚  ...    â”‚   ...    â”‚  ...   â”‚  ...   â”‚  ...   â”‚
â”‚     503      â”‚    1    â”‚    24     â”‚ 2024-10-19...  â”‚ 756.30  â”‚ 448.59   â”‚  1.0   â”‚ 0.3077 â”‚ 40.69  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      COMO ACCEDER A LOS DATOS                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1âƒ£  DESDE FASTAPI (Recomendado):
   GET /lstm/metricas â†’ Lee de prediccion_demanda
   POST /lstm/predecir â†’ Consulta tabla prediccion_demanda
   GET /lstm/reporte â†’ Analiza tabla prediccion_demanda

2âƒ£  DESDE PYTHON SQLAlchemy:
   from models.models import PrediccionDemanda
   db.query(PrediccionDemanda).filter_by(id_zona=1).all()

3âƒ£  DESDE SQLite CLI:
   sqlite3 gestion_rutas.db
   SELECT COUNT(*) FROM prediccion_demanda;

4âƒ£  DESDE POSTGRESQL (Futuro):
   psql -U postgres -d gestion_rutas
   SELECT * FROM prediccion_demanda LIMIT 5;

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                       INFORMACIÃ“N CLAVE                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

UBICACIÃ“N DEL ARCHIVO:
    c:\Users\hanss\Desktop\LAR\gestion_rutas\gestion_rutas.db

TAMAÃ‘O:
   53 KB (muy pequeÃ±o, ideal para desarrollo)

FORMATO:
    SQLite 3 (base de datos embebida)

REGISTROS CARGADOS:
   503 predicciones LSTM
   1 zona de prueba
   Total: 504 filas

ESTADO:
  ğŸŸ¢ Datos listos para consultar
  ğŸŸ¢ Datos listos para migrar a PostgreSQL
  ğŸŸ¢ Datos validados y verificados

PRÃ“XIMOS PASOS:
  1. Consumir desde endpoints FastAPI
  2. Migrar a PostgreSQL (si es necesario)
  3. Agregar mÃ¡s datos de otros puntos de recolecciÃ³n
