<!DOCTYPE html>
<html>
<head>
    <title>Test Coordenadas 2</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        #map { height: 600px; width: 100%; }
        .info { padding: 10px; background: white; margin: 10px; }
    </style>
</head>
<body>
    <div class="info">
        <h2>Test 2: Probando diferentes órdenes</h2>
        <p><b>CSV dice:</b> latitud=-20.2665, longitud=-70.1675</p>
        <p><b>Centro Iquique (funciona):</b> [-20.2397, -70.1348]</p>
        <hr>
        <p><b>Marcador AMARILLO:</b> Cerca del centro [lat-0.03, lon-0.03] = [-20.2697, -70.1648]</p>
        <p><b>Marcador MORADO:</b> Invertir orden = [-70.1675, -20.2665]</p>
    </div>
    <div id="map"></div>
    
    <script>
        // Crear mapa centrado en Iquique
        const map = L.map('map').setView([-20.2397, -70.1348], 14);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap',
            maxZoom: 19
        }).addTo(map);

        // Marcador VERDE - Centro de Iquique (sabemos que funciona)
        L.circleMarker([-20.2397, -70.1348], {
            radius: 10,
            fillColor: '#00FF00',
            color: '#000000',
            weight: 2,
            opacity: 1,
            fillOpacity: 0.8
        }).bindPopup('<b>VERDE:</b> Centro Iquique<br>[-20.2397, -70.1348]<br>FUNCIONA!').addTo(map);

        // Punto de prueba - ajustado manualmente desde el centro
        L.circleMarker([-20.2697, -70.1648], {
            radius: 10,
            fillColor: '#FFFF00',
            color: '#000000',
            weight: 2,
            opacity: 1,
            fillOpacity: 0.8
        }).bindPopup('<b>AMARILLO:</b> Punto cerca del centro<br>[-20.2697, -70.1648]<br>(centro -0.03, -0.03)').addTo(map);

        // Lo que dice el CSV pero parece estar mal
        L.circleMarker([-20.2665, -70.1675], {
            radius: 8,
            fillColor: '#0000FF',
            color: '#000000',
            weight: 2,
            opacity: 1,
            fillOpacity: 0.8
        }).bindPopup('<b>AZUL:</b> CSV dice<br>[-20.2665, -70.1675]').addTo(map);

        // Círculo grande para marcar área de Iquique
        L.circle([-20.2397, -70.1348], {
            color: 'green',
            fillColor: '#green',
            fillOpacity: 0.1,
            radius: 5000
        }).bindPopup('Área de Iquique (5km radio)').addTo(map);

        // Agregar un círculo en el océano donde aparece el azul
        L.circle([-20.2665, -70.1675], {
            color: 'red',
            fillColor: '#red',
            fillOpacity: 0.1,
            radius: 2000
        }).bindPopup('Donde aparece el punto CSV<br>(EN EL OCEANO)').addTo(map);
    </script>
</body>
</html>
